<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<link rel="icon" type="image/svg+xml" href="/vite.svg" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Signals React Talk</title>
		<!-- <link rel="stylesheet" href="/src/index.css" /> -->

		<!-- Reveal.js CSS -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/reset.css" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/reveal.css" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/theme/black.css" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/theme/league.css" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.11.1/styles/night-owl.css" />

		<!-- Custom styles -->
		<style>
			.text-3xl {
				font-size: 1.875rem;
			}
			.leading-relaxed {
				line-height: 1.625;
			}
			.text-4xl {
				font-size: 2.25rem;
			}
			.mb-8 {
				margin-bottom: 2rem;
			}
			.text-blue-400 {
				color: #60a5fa;
			}
			.grid {
				display: grid;
			}
			.grid-cols-1 {
				grid-template-columns: repeat(1, minmax(0, 1fr));
			}
			.gap-8 {
				gap: 2rem;
			}
			.items-center {
				align-items: center;
			}
			.h-full {
				height: 100%;
			}
			.flex {
				display: flex;
			}
			.justify-center {
				justify-content: center;
			}
			.flex-1 {
				flex: 1 1 0%;
			}
			.h-170 {
				height: 42.5rem;
			}
			.w-auto {
				width: auto;
			}
			.object-contain {
				object-fit: contain;
			}
			.text-center {
				text-align: center;
			}
			.space-y-4 > * + * {
				margin-top: 1rem;
			}

			/* Subtle About Me improvements */
			.about-me-list {
				max-width: 800px;
				margin: 0 auto;
				list-style: none !important;
				list-style-type: none !important;
				padding-left: 0 !important;
			}

			.about-me-list li {
				padding: 1rem 0;
				border-left: 3px solid transparent;
				padding-left: 1.5rem;
				margin: 0.5rem 0;
				transition: all 0.3s ease;
				list-style: none !important;
				list-style-type: none !important;
			}

			.about-me-list li::before {
				content: none !important;
			}

			.about-me-list li::marker {
				content: none !important;
			}

			.about-me-list li.fragment.visible {
				border-left-color: #60a5fa;
				background: rgba(96, 165, 250, 0.05);
				border-radius: 0 8px 8px 0;
			}

			.about-me-list li:hover {
				background: rgba(96, 165, 250, 0.08);
			}

			.about-me-title {
				color: #60a5fa;
				margin-bottom: 2.5rem;
				font-weight: 300;
			}

			.costco-note {
				font-style: italic;
				opacity: 0.8;
				margin-top: 0.5rem;
				padding-left: 2rem;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<!-- Introduction Slide -->
				<section data-background-image="src/assets/background.jpg">
					<h1>Send Me a Signal</h1>
					<p>Fine grained reactivity for UI development</p>
				</section>

				<!-- About Me Slide -->
				<section>
					<h1 class="about-me-title">A little about me</h1>
					<ul class="text-3xl leading-relaxed about-me-list">
						<li class="fragment">Currently a developer at ThinkAlpha</li>
						<li class="fragment">
							Former Costco, Symphosize, Oportun and AutoFi
							<div class="costco-note fragment">
								<span role="img" aria-label="yea">ðŸ«¡</span>
								yea Costco, 15 years did virtually every job in th warehouse
							</div>
						</li>
						<li class="fragment">Recent empty nester, highly recommend it</li>
						<li class="fragment">React developer, I enjoy working on UI problems</li>
						<li class="fragment">Until you trip over "the React way"</li>
					</ul>
				</section>

				<!-- What Are Signals - First Section -->
				<section>
					<h2 class="text-4xl mb-8 text-blue-400">What Are Signals?</h2>

					<div class="grid grid-cols-1 gap-8 items-center h-full">
						<p class="fragment">
							Signals are a modern, efficient solution for reactive state and UI management in JavaScript
							frameworks, offering automatic dependency tracking and targeted updates.
						</p>

						<div class="fragment flex justify-center items-center flex-1 h-full">
							<img src="src/assets/Bored.gif" alt="Bored meme" class="h-170 w-auto object-contain" />
						</div>
					</div>
				</section>

				<!-- What Are Signals - Second Section -->
				<section>
					<h2 class=" text-blue-400">What Are Signals?</h2>
					<p class="fragment">Let's try to define them</p>

					<div class="grid grid-cols-1 gap-8 items-center h-full">
						<div class="text-center space-y-4">
							<div class="fragment">Signals are Pub Sub</div>
							<div class="fragment">Signals are an event system</div>
							<div class="fragment">Signals are a reactive primitive</div>
							<div class="fragment">
								Signals have a tc39 proposal (stage 0):
								<a
									href="https://github.com/tc39/proposal-signals"
									target="_blank"
									rel="noopener noreferrer"
									style="color: #90caf9; text-decoration: underline"
								>
									github.com/tc39/proposal-signals
								</a>
							</div>
							<div class="fragment">
								Signals are not new, just reimagined ideas going back to knockout in 2010
							</div>
				</section>

				<section>
					<h2 class="">Signals in the wild</h2>
					<h3 class="fragment">Frameworks and libraries that support signals</h3>

					<div class="grid grid-cols-1 gap-8 items-center h-full">
						<div class="text-center space-y-4">
							
							<div>
								<div class="text-center space-y-4">
									<div class="fragment">Angular</div>
									<div class="fragment">Solid</div>
									<div class="fragment">Qwik</div>
									<div class="fragment">Flutter</div>
									<div class="fragment">Svelte</div>
									<div class="fragment">Vue, not strictly signals, identical API</div>
									<div class="fragment">Preact</div>
									<div class="fragment">React, via Preact's library</div>
								</div>
							</div>
						</div>
					</div>
				</section>

				<!-- Basic Example - Create Signal -->
				<section data-auto-animate>
					<h2 class="text-4xl mb-8 text-blue-400">Code Example</h2>
					<pre
						class="fragment"
						data-id="code-animation"
					><code class="typescript" data-line-numbers="true" data-trim>
						// create a signal
						const counter = signal(0);
					</code></pre>
				</section>

				<!-- Counter Example - Read Signal -->
				<section data-auto-animate data-example="counter-example-read">
					<h2 class="text-4xl mb-8 text-blue-400">Code Example</h2>
					<pre data-id="code-animation"><code class="typescript" data-line-numbers="4-5" data-trim>
						// create a signal
						const counter = signal(0);

						// read the signal
						const currentCounter = counter.value;
					</code></pre>
				</section>

				<!-- Counter Example - Update Signal (continue to show previous example)-->
				<section data-auto-animate data-example="counter-example-read">
					<h2 class="text-4xl mb-8 text-blue-400">Code Example</h2>
					<pre data-id="code-animation"><code class="typescript" data-line-numbers="7-9" data-trim>
						// create a signal
						const counter = signal(0);

						// read the signal
						const currentCounter = counter.value;

						// update the signal
						const increment = () => counter.value++;
						const decrement = () => counter.value--;
					</code></pre>
				</section>

				<!-- Counter Example - Update Signal (show controls)-->
				<section data-auto-animate data-example="counter-example-update">
					<h2 class="text-4xl mb-8 text-blue-400">Code Example</h2>
					<pre data-id="code-animation"><code class="typescript" data-line-numbers="7-9" data-trim>
						// create a signal
						const counter = signal(0);

						// read the signal
						const currentCounter = counter.value;

						// update the signal
						const increment = () => counter.value++;
						const decrement = () => counter.value--;
					</code></pre>
				</section>

				<!-- Counter Example - Reactivity Computed (continue to show previous example)-->
				<section data-auto-animate data-example="counter-example-update">
					<h2 class="text-4xl mb-8 text-blue-400">Code Example</h2>
					<pre data-id="code-animation"><code class="typescript" data-line-numbers="11-15" data-trim>
						// create a signal
						const counter = signal(0);

						// read the signal
						const currentCounter = counter.value;

						// update the signal
						const increment = () => counter.value++;
						const decrement = () => counter.value--;

						// reactivity
						const isEven = computed(() => (counter.value & 1) == 0);
						const parity = computed(
							() => isEven.value ? "even" : "odd"
						);
					</code></pre>
				</section>

				<!-- Counter Example - Reactivity Computed (continue to show previous example)-->
				<section data-auto-animate data-example="counter-example-computed">
					<h2 class="text-4xl mb-8 text-blue-400">Code Example</h2>
					<pre data-id="code-animation"><code class="typescript" data-line-numbers="11-15" data-trim>
						// create a signal
						const counter = signal(0);

						// read the signal
						const currentCounter = counter.value;

						// update the signal
						const increment = () => counter.value++;
						const decrement = () => counter.value--;

						// reactivity
						const isEven = computed(() => (counter.value & 1) == 0);
						const parity = computed(
							() => isEven.value ? "even" : "odd"
						);
					</code></pre>
				</section>

				<!-- Counter Example - Reactivity Effects -->
				<section data-auto-animate data-example="counter-example-no-negative">
					<h2 class="text-4xl mb-8 text-blue-400">Code Example</h2>
					<pre data-id="code-animation"><code class="typescript" data-line-numbers="15-22" data-trim>
						// create a signal
						const counter = signal(0);

						// read the signal
						const currentCounter = counter.value;

						// update the signal
						const increment = () => counter.value++;
						const decrement = () => counter.value--;

						// reactivity
						const isEven = computed(() => (counter.value & 1) == 0);
						const parity = computed(() => isEven.value ? "even" : "odd");

						// effects
						effect(() => {
							if (counterSignal.value < 0) {
								counterSignal.value = 0;
							}
						});
						
					</code></pre>
				</section>

				<!-- Signals vs React Comparison -->
				<section data-auto-animate>
					<h2 class="text-4xl mb-8 text-blue-400">What are we solving?</h2>

					<div
						style="
							display: grid;
							grid-template-columns: 1fr 1fr;
							gap: 1rem;
							text-align: left;
							width: 100%;
							height: calc(100vh - 40rem);
						"
					>
						<pre style="height: 100%"><code class="typescript" data-trim>
							// create a signal
							const counter = signal(0);

							// update the signal
							const increment = () => counter.value++;
							const decrement = () => counter.value--;

							// reactivity
							const isEven = computed(() => (counter.value & 1) == 0);
							const parity = computed(
								() => isEven.value ? "even" : "odd"
							);

							// effects
							effect(() => {
								if (counter.value < 0) {
									counter.value = 0;
								}
							});
						</code></pre>

						<pre style="height: 100%"><code class="typescript" data-trim>
							// create state
							const [counter, setCounter] = useState(0);

							// update the state
							const increment = () => setCounter(prev => prev + 1);
							const decrement = () => setCounter(prev => prev - 1);

							// reactivity (computed values)
							const isEven = useMemo(() => (counter & 1) == 0, [counter]);
							const parity = useMemo(
								() => isEven ? "even" : "odd", 
								[isEven]
							);

							// effects
							useEffect(() => {
								if (counter < 0) {
									setCounter(0);
								}
							}, [counter]);
						</code></pre>
					</div>
				</section>

				<!-- ThinkAlpha Movie -->
				<section data-auto-animate >
					<video
						data-autoplay
						loop
						muted
						style="width: 100%; height: 100vh; object-fit: contain"
						src="src/assets/thinkalpha-movie.mov"
					></video>
				</section>

				<!-- The famous todo app -->
				<section data-auto-animate data-example="todo-app-react" data-example-width="400" data-example-height="500">
					<h2 class="text-4xl mb-8 text-blue-400">The famous todo app</h2>
				</section>

				<!-- The famous todo app in context -->
				<section data-auto-animate data-example="todo-app-react-fullsite" data-example-width="800" data-example-height="600">
					<h2 class="text-4xl mb-8 text-blue-400">Todo app in context</h2>
					<p>A more realistic web application layout</p>
				</section>

				<!-- The famous todo app let's look at the code -->
				<section data-auto-animate>
					<h2 class="text-4xl mb-8 text-blue-400">Todo app code</h2>
					<div style="height: calc(100vh - 20rem);">
						<pre data-id="code-animation" style="height: 100%"><code class="typescript" data-line-numbers="true" data-trim>
							export function Todo() {
								const [todos, setTodos] = useState([
									{ id: 1, text: "Learn React", completed: true, createdAt: new Date() },
									{ id: 2, text: "Build a todo app", completed: false, createdAt: new Date() },
									{ id: 3, text: "Give a great talk", completed: false, createdAt: new Date() },
								]);

								const { completedTodos, incompleteTodos, completionPercentage } = useMemo(() => {
									const completed = todos.filter((todo) => todo.completed);
									const incomplete = todos.filter((todo) => !todo.completed);
									const percentage = todos.length > 0 ? Math.round((completed.length / todos.length) * 100) : 0;

									return {
										completedTodos: completed,
										incompleteTodos: incomplete,
										completionPercentage: percentage,
									};
								}, [todos]);

								const addTodo = useCallback((newTodo: TodoType) => {
									setTodos((prev) => [...prev, newTodo]);
								}, []);

								const toggleTodo = useCallback((id: number) => {
									setTodos((prev) => prev.map((todo) => (todo.id === id ? { ...todo, completed: !todo.completed } : todo)));
								}, []);

								const deleteTodo = useCallback((id: number) => {
									setTodos((prev) => prev.filter((todo) => todo.id !== id));
								}, []);

								return (
									<div className="todo-container">
										... code ...
									</div>
								);
							});
						</code></pre>
					</div>
				</section>
				
				<!-- Todo app code extract to hook -->
				<section data-auto-animate>
					<h2 class="text-4xl mb-8 text-blue-400">Todo app code</h2>
					<div style="height: calc(100vh - 20rem);">
						<pre data-id="code-animation" style="height: 100%"><code class="typescript" data-line-numbers="true" data-trim>
							export function Todo() {
								const {
									todos,
									setTodos,
									completedTodos,
									incompleteTodos,
									completionPercentage,
									addTodo,
									toggleTodo,
									deleteTodo
								} = useTodo();

								return (
									<div className="todo-container">
										... code ...
									</div>
								);
							});
						</code></pre>
					</div>
				</section>
				
				<!-- todo app code move hook up to app root -->
				<section data-auto-animate>
					<h2 class="text-4xl mb-8 text-blue-400">Todo app code</h2>
					<div style="height: calc(100vh - 20rem);">
						<pre data-id="code-animation" style="height: 100%"><code class="language-javascript" data-line-numbers="true" data-trim>
							export function App() {
								const {
									todos,
									setTodos,
									completedTodos,
									incompleteTodos,
									completionPercentage,
									addTodo,
									toggleTodo,
									deleteTodo
								} = useTodo();
							
								return (
									<div className="app-container">
										<Header stats={completionPercentage} />

										<aside>
											...
										</aside>
							
										<main>
											<div className="todo-card">
												<Status
													todos={todos}
													completedCount={completedTodos.length}
													completionPercentage={completionPercentage}
													showRenders={showRenders}
												/>
							
												<Form onAddTodo={addTodo} showRenders={showRenders} />
							
												<List
													todos={todos}
													completedTodos={completedTodos}
													incompleteTodos={incompleteTodos}
													onToggleTodo={toggleTodo}
													onDeleteTodo={deleteTodo}
													showRenders={showRenders}
												/>
											</div>
										</main>
									</div>
								);
							}
						</code></pre>
					</div>
				</section>
				
				<!-- todo app code move hook up to app root, now show example -->
				<section data-auto-animate data-example="todo-app-react-fullsite-v2" data-example-width="800" data-example-height="600">
					<h2 class="text-4xl mb-8 text-blue-400">Todo app code</h2>
					<div style="height: calc(100vh - 20rem);">
						<pre data-id="code-animation" style="height: 100%"><code class="language-javascript" data-line-numbers="true" data-trim>
							export function App() {
								const {
									todos,
									setTodos,
									completedTodos,
									incompleteTodos,
									completionPercentage,
									addTodo,
									toggleTodo,
									deleteTodo
								} = useTodo();
							
								return (
									<div className="app-container">
										<Header stats={completionPercentage} />

										<aside>
											...
										</aside>
							
										<main>
											<div className="todo-card">
												<Status
													todos={todos}
													completedCount={completedTodos.length}
													completionPercentage={completionPercentage}
													showRenders={showRenders}
												/>
							
												<Form onAddTodo={addTodo} showRenders={showRenders} />
							
												<List
													todos={todos}
													completedTodos={completedTodos}
													incompleteTodos={incompleteTodos}
													onToggleTodo={toggleTodo}
													onDeleteTodo={deleteTodo}
													showRenders={showRenders}
												/>
											</div>
										</main>
									</div>
								);
							}
						</code></pre>
					</div>
				</section>

				<!-- begin migration to Signals from Hooks -->
				 <section data-auto-animate>
					<h2 class="text-4xl mb-8 text-blue-400">Migration to Signals from Hooks</h2>
					<div style="height: calc(100vh - 20rem);">
						<pre data-id="code-animation-hook-to-signals" style="height: 100%"><code class="language-javascript" data-line-numbers="1-43|4" data-trim>
							import { useCallback, useMemo, useState } from "react";

							export function useTodo() {
								const [todos, setTodos] = useState([
									{ id: 1, text: "Learn React", completed: true, createdAt: new Date() },
									{ id: 2, text: "Build a todo app", completed: false, createdAt: new Date() },
									{ id: 3, text: "Give a great talk", completed: false, createdAt: new Date() }
								]);

								const { completedTodos, incompleteTodos, completionPercentage } = useMemo(() => {
									const completed = todos.filter((todo) => todo.completed);
									const incomplete = todos.filter((todo) => !todo.completed);
									const percentage = todos.length > 0 ? Math.round((completed.length / todos.length) * 100) : 0;

									return {
										completedTodos: completed,
										incompleteTodos: incomplete,
										completionPercentage: percentage,
									};
								}, [todos]);

								const addTodo = useCallback((newTodo: TodoType) => {
									setTodos((prev) => [...prev, newTodo]);
								}, []);

								const toggleTodo = useCallback((id: number) => {
									setTodos((prev) => prev.map((todo) => (todo.id === id ? { ...todo, completed: !todo.completed } : todo)));
								}, []);

								const deleteTodo = useCallback((id: number) => {
									setTodos((prev) => prev.filter((todo) => todo.id !== id));
								}, []);

								return {
									todos,
									completedTodos,
									incompleteTodos,
									completionPercentage,
									addTodo,
									toggleTodo,
									deleteTodo,
								};
							}
						</code></pre>
					</div>
				 </section>
				 
				 <!-- import signals, replace useState with Signal -->
				 <section data-auto-animate>
					<h2 class="text-4xl mb-8 text-blue-400">Migration to Signals from Hooks</h2>
					<div style="height: calc(100vh - 20rem);">
						<pre data-id="code-animation-hook-to-signals" style="height: 100%"><code class="language-javascript" data-line-numbers="2,5|11-21" data-trim>
							import { useCallback, useMemo, useState } from "react";
							import { signal } from "@preact/signals-core";

							export function useTodo() {
								const todos = signal([
									{ id: 1, text: "Learn React", completed: true, createdAt: new Date() },
									{ id: 2, text: "Build a todo app", completed: false, createdAt: new Date() },
									{ id: 3, text: "Give a great talk", completed: false, createdAt: new Date() }
								]);

								const { completedTodos, incompleteTodos, completionPercentage } = useMemo(() => {
									const completed = todos.filter((todo) => todo.completed);
									const incomplete = todos.filter((todo) => !todo.completed);
									const percentage = todos.length > 0 ? Math.round((completed.length / todos.length) * 100) : 0;

									return {
										completedTodos: completed,
										incompleteTodos: incomplete,
										completionPercentage: percentage,
									};
								}, [todos]);

								const addTodo = useCallback((newTodo: TodoType) => {
									setTodos((prev) => [...prev, newTodo]);
								}, []);

								const toggleTodo = useCallback((id: number) => {
									setTodos((prev) => prev.map((todo) => (todo.id === id ? { ...todo, completed: !todo.completed } : todo)));
								}, []);

								const deleteTodo = useCallback((id: number) => {
									setTodos((prev) => prev.filter((todo) => todo.id !== id));
								}, []);

								return {
									todos,
									completedTodos,
									incompleteTodos,
									completionPercentage,
									addTodo,
									toggleTodo,
									deleteTodo,
								};
							}
													</code></pre>
					</div>
				 </section>
				 
				 <!-- replace useMemo with computed, replace useState with Signal -->
				 <section data-auto-animate>
					<h2 class="text-4xl mb-8 text-blue-400">Migration to Signals from Hooks</h2>
					<div style="height: calc(100vh - 20rem);">
						<pre data-id="code-animation-hook-to-signals" style="height: 100%"><code class="language-javascript" data-line-numbers="2, 11-15|17-27" data-trim>
							import { useCallback, useMemo, useState } from "react";
							import { signal, computed } from "@preact/signals-core";

							export function useTodo() {
								const todos = signal([
									{ id: 1, text: "Learn React", completed: true, createdAt: new Date() },
									{ id: 2, text: "Build a todo app", completed: false, createdAt: new Date() },
									{ id: 3, text: "Give a great talk", completed: false, createdAt: new Date() }
								]);

								const completedTodos = computed(() => todos.value.filter((todo) => todo.completed));
								const incompleteTodos = computed(() => todos.value.filter((todo) => !todo.completed));
								const completionPercentage = computed(() =>
									todos.value.length > 0 ? Math.round((completedTodos.value.length / todos.value.length) * 100) : 0
								);

								const addTodo = useCallback((newTodo: TodoType) => {
									setTodos((prev) => [...prev, newTodo]);
								}, []);

								const toggleTodo = useCallback((id: number) => {
									setTodos((prev) => prev.map((todo) => (todo.id === id ? { ...todo, completed: !todo.completed } : todo)));
								}, []);

								const deleteTodo = useCallback((id: number) => {
									setTodos((prev) => prev.filter((todo) => todo.id !== id));
								}, []);

								return {
									todos,
									completedTodos,
									incompleteTodos,
									completionPercentage,
									addTodo,
									toggleTodo,
									deleteTodo,
								};
							}
													</code></pre>
					</div>
				 </section>
				 
				 <!-- replace actions with simple functions -->
				 <section data-auto-animate>
					<h2 class="text-4xl mb-8 text-blue-400">Migration to Signals from Hooks</h2>
					<div style="height: calc(100vh - 20rem);">
						<pre data-id="code-animation-hook-to-signals" style="height: 100%"><code class="language-javascript" data-line-numbers="17-27 " data-trim>
							import { useCallback, useMemo, useState } from "react";
							import { signal, computed } from "@preact/signals-core";

							export function useTodo() {
								const todos = signal([
									{ id: 1, text: "Learn React", completed: true, createdAt: new Date() },
									{ id: 2, text: "Build a todo app", completed: false, createdAt: new Date() },
									{ id: 3, text: "Give a great talk", completed: false, createdAt: new Date() }
								]);

								const completedTodos = computed(() => todos.value.filter((todo) => todo.completed));
								const incompleteTodos = computed(() => todos.value.filter((todo) => !todo.completed));
								const completionPercentage = computed(() =>
									todos.value.length > 0 ? Math.round((completedTodos.value.length / todos.value.length) * 100) : 0
								);

								const addTodo = (newTodo: TodoType) => {
									todos.value.push(newTodo);
								}
							
								const toggleTodo = (id: number) => {
									todos.value = todos.value.map((todo) => (todo.id === id ? { ...todo, completed: !todo.completed } : todo));
								};
							
								const deleteTodo = (id: number) => {
									todos.value = todos.value.filter((todo) => todo.id !== id);
								};

								return {
									todos,
									completedTodos,
									incompleteTodos,
									completionPercentage,
									addTodo,
									toggleTodo,
									deleteTodo,
								};
							}
						</code></pre>
					</div>
				 </section>
				 
				 <!-- move to module scope and remove unused imports -->
				 <section data-auto-animate>
					<h2 class="text-4xl mb-8 text-blue-400">Migration to Signals from Hooks</h2>
					<div style="height: calc(100vh - 20rem);">
						<pre data-id="code-animation-hook-to-signals" style="height: 100%"><code class="language-typescript" data-line-numbers data-trim>
							import { signal, computed } from "@preact/signals-core";
							import { Todo as TodoType } from "./types";

							export const todos = signal([
								{ id: 1, text: "Learn React", completed: true, createdAt: new Date() },
								{ id: 2, text: "Build a todo app", completed: false, createdAt: new Date() },
								{ id: 3, text: "Give a great talk", completed: false, createdAt: new Date() },
							]);

							export const completedTodos = computed(() => todos.value.filter((todo) => todo.completed));
							export const incompleteTodos = computed(() => todos.value.filter((todo) => !todo.completed));
							export const completionPercentage = computed(() =>
								todos.value.length > 0 ? Math.round((completedTodos.value.length / todos.value.length) * 100) : 0
							);

							export const addTodo = (newTodo: TodoType) => {
								todos.value.push(newTodo);
							};

							export const toggleTodo = (id: number) => {
								todos.value = todos.value.map((todo) => (todo.id === id ? { ...todo, completed: !todo.completed } : todo));
							};

							export const deleteTodo = (id: number) => {
								todos.value = todos.value.filter((todo) => todo.id !== id);
							};
						</code></pre>
					</div>
				 </section>

				 <!-- run the signal demo -->
				 <section data-auto-animate data-example="todo-app-react-fullsite-v3-signals" data-example-width="800" data-example-height="600">
					<h2 class="text-4xl mb-8 text-blue-400">Migration to Signals from Hooks</h2>
					<div style="height: calc(100vh - 20rem);">
						<pre data-id="code-animation-hook-to-signals" style="height: 100%"><code class="language-typescript" data-line-numbers data-trim>
							import { signal, computed } from "@preact/signals-core";
							import { Todo as TodoType } from "./types";

							export const todos = signal([
								{ id: 1, text: "Learn React", completed: true, createdAt: new Date() },
								{ id: 2, text: "Build a todo app", completed: false, createdAt: new Date() },
								{ id: 3, text: "Give a great talk", completed: false, createdAt: new Date() },
							]);

							export const completedTodos = computed(() => todos.value.filter((todo) => todo.completed));
							export const incompleteTodos = computed(() => todos.value.filter((todo) => !todo.completed));
							export const completionPercentage = computed(() =>
								todos.value.length > 0 ? Math.round((completedTodos.value.length / todos.value.length) * 100) : 0
							);

							export const addTodo = (newTodo: TodoType) => {
								todos.value.push(newTodo);
							};

							export const toggleTodo = (id: number) => {
								todos.value = todos.value.map((todo) => (todo.id === id ? { ...todo, completed: !todo.completed } : todo));
							};

							export const deleteTodo = (id: number) => {
								todos.value = todos.value.filter((todo) => todo.id !== id);
							};
						</code></pre>
					</div>
				 </section>
			</div>
		</div>

		<!-- React App Container -->
		<div id="react-app" style="margin-top: 2rem; padding: 2rem; border-top: 1px solid #444"></div>

		<!-- Reveal.js JavaScript -->
		<script src="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/reveal.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/plugin/highlight/highlight.js"></script>
		<script>
			// Initialize Reveal.js
			Reveal.initialize({
				transition: "slide",
				hash: true,
				respondToHashChanges: true,
				history: true,
				plugins: [RevealHighlight],
				// The "normal" size of the presentation, aspect ratio will
				// be preserved when the presentation is scaled to fit different
				// resolutions. Can be specified using percentage units.
				width: "100%",
				height: "100%",

				// Factor of the display size that should remain empty around
				// the content
				margin: 0.04,

				// Bounds for smallest/largest possible scale to apply to content
				minScale: 0.2,
				maxScale: 2.0,
			});
		</script>

		<!-- React App Script -->
		<script type="module" src="/src/main.tsx"></script>
	</body>
</html>
